<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MongoDB Cheat Sheet #5 - Query Operators</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
      color: #fff;
      min-height: 100vh;
      padding: 20px;
    }
    .container {
      max-width: 1400px;
      margin: 0 auto;
    }
    .header {
      text-align: center;
      margin-bottom: 30px;
      padding: 20px;
      background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
      border-radius: 15px;
    }
    .header h1 {
      font-size: 2em;
      margin-bottom: 10px;
      color: #fff;
    }
    .header .subtitle {
      color: #fff;
      font-size: 1.1em;
      opacity: 0.9;
    }
    .badge {
      display: inline-block;
      background: rgba(0,0,0,0.3);
      color: #fff;
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 0.85em;
      margin-top: 10px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }
    .card {
      background: rgba(255,255,255,0.05);
      border-radius: 15px;
      padding: 20px;
      border: 1px solid rgba(255,255,255,0.1);
      transition: transform 0.3s, box-shadow 0.3s;
    }
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(231,76,60,0.3);
    }
    .card-header {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 2px solid #e74c3c;
    }
    .card-icon {
      font-size: 1.8em;
      margin-right: 12px;
    }
    .card-title {
      font-size: 1.3em;
      color: #e74c3c;
    }
    .code-block {
      background: #0d1117;
      border-radius: 8px;
      padding: 15px;
      margin: 10px 0;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 0.85em;
      overflow-x: auto;
      border-left: 3px solid #e74c3c;
    }
    .code-comment {
      color: #6a737d;
    }
    .code-keyword {
      color: #ff7b72;
    }
    .code-string {
      color: #a5d6ff;
    }
    .code-method {
      color: #d2a8ff;
    }
    .code-number {
      color: #79c0ff;
    }
    .code-bool {
      color: #ff7b72;
    }
    .code-prop {
      color: #7ee787;
    }
    .highlight {
      background: linear-gradient(135deg, rgba(231,76,60,0.2), rgba(192,57,43,0.2));
      padding: 15px;
      border-radius: 10px;
      margin: 10px 0;
    }
    .list-item {
      padding: 8px 0;
      padding-left: 20px;
      position: relative;
    }
    .list-item::before {
      content: "‚ñ∏";
      position: absolute;
      left: 0;
      color: #e74c3c;
    }
    .tag {
      display: inline-block;
      background: rgba(231,76,60,0.2);
      color: #e74c3c;
      padding: 3px 10px;
      border-radius: 5px;
      font-size: 0.8em;
      margin: 2px;
    }
    .tag-blue {
      background: rgba(52,152,219,0.2);
      color: #3498db;
    }
    .tag-green {
      background: rgba(46,204,113,0.2);
      color: #2ecc71;
    }
    .tag-orange {
      background: rgba(243,156,18,0.2);
      color: #f39c12;
    }
    .tag-purple {
      background: rgba(155,89,182,0.2);
      color: #9b59b6;
    }
    .tag-cyan {
      background: rgba(26,188,156,0.2);
      color: #1abc9c;
    }
    .full-width {
      grid-column: 1 / -1;
    }
    .info-box {
      background: rgba(52,152,219,0.1);
      border-left: 3px solid #3498db;
      padding: 12px;
      border-radius: 0 8px 8px 0;
      margin: 10px 0;
      font-size: 0.9em;
    }
    .warning-box {
      background: rgba(231,76,60,0.1);
      border-left: 3px solid #e74c3c;
      padding: 12px;
      border-radius: 0 8px 8px 0;
      margin: 10px 0;
      font-size: 0.9em;
    }
    .tip-box {
      background: rgba(46,204,113,0.1);
      border-left: 3px solid #2ecc71;
      padding: 12px;
      border-radius: 0 8px 8px 0;
      margin: 10px 0;
      font-size: 0.9em;
    }
    .section-title {
      color: #e74c3c;
      font-size: 1.1em;
      margin: 15px 0 10px 0;
      padding-bottom: 5px;
      border-bottom: 1px dashed rgba(231,76,60,0.3);
    }
    .comparison-table {
      width: 100%;
      border-collapse: collapse;
      margin: 10px 0;
      font-size: 0.9em;
    }
    .comparison-table th, .comparison-table td {
      padding: 10px;
      text-align: left;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    .comparison-table th {
      background: rgba(231,76,60,0.2);
      color: #e74c3c;
    }
    .comparison-table tr:hover {
      background: rgba(255,255,255,0.05);
    }
    .operator-badge {
      display: inline-block;
      background: rgba(231,76,60,0.3);
      color: #fff;
      padding: 4px 12px;
      border-radius: 6px;
      font-family: monospace;
      font-size: 0.9em;
      font-weight: bold;
      margin: 3px;
    }
    .flex-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 10px 0;
    }
    .example-box {
      background: rgba(0,0,0,0.2);
      border-radius: 8px;
      padding: 12px;
      margin: 10px 0;
    }
    .example-title {
      color: #e74c3c;
      font-weight: bold;
      margin-bottom: 8px;
      font-size: 0.9em;
    }
    .footer {
      text-align: center;
      padding: 20px;
      color: rgba(255,255,255,0.5);
      font-size: 0.9em;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <h1>üçÉ MongoDB Cheat Sheet #5</h1>
      <div class="subtitle">Query Operators</div>
      <div class="badge">üîç Comparison ‚Ä¢ Logical ‚Ä¢ Array ‚Ä¢ Element ‚Ä¢ Evaluation</div>
    </div>

    <!-- Operators Overview -->
    <div class="grid">
      <div class="card full-width">
        <div class="card-header">
          <span class="card-icon">üìä</span>
          <span class="card-title">Query Operators Overview</span>
        </div>
        <table class="comparison-table">
          <tr>
            <th>Category</th>
            <th>Operators</th>
            <th>M√¥ t·∫£</th>
          </tr>
          <tr>
            <td><strong>Comparison</strong></td>
            <td><code>$eq, $ne, $gt, $gte, $lt, $lte, $in, $nin</code></td>
            <td>So s√°nh gi√° tr·ªã</td>
          </tr>
          <tr>
            <td><strong>Logical</strong></td>
            <td><code>$and, $or, $not, $nor</code></td>
            <td>K·∫øt h·ª£p ƒëi·ªÅu ki·ªán logic</td>
          </tr>
          <tr>
            <td><strong>Element</strong></td>
            <td><code>$exists, $type</code></td>
            <td>Ki·ªÉm tra field t·ªìn t·∫°i v√† ki·ªÉu d·ªØ li·ªáu</td>
          </tr>
          <tr>
            <td><strong>Array</strong></td>
            <td><code>$all, $elemMatch, $size</code></td>
            <td>Query array fields</td>
          </tr>
          <tr>
            <td><strong>Evaluation</strong></td>
            <td><code>$regex, $expr, $mod, $text, $where</code></td>
            <td>Bi·ªÉu th·ª©c v√† pattern matching</td>
          </tr>
        </table>
      </div>
    </div>

    <!-- Comparison Operators -->
    <div class="grid">
      <div class="card">
        <div class="card-header">
          <span class="card-icon">‚öñÔ∏è</span>
          <span class="card-title">Comparison - $eq & $ne</span>
        </div>
        
        <div class="section-title">$eq (Equal)</div>
        <div class="code-block">
          <span class="code-comment">// T√¨m documents c√≥ age = 25</span><br>
          db.users.<span class="code-method">find</span>({ <span class="code-prop">age</span>: { <span class="code-keyword">$eq</span>: <span class="code-number">25</span> } })<br><br>
          
          <span class="code-comment">// Vi·∫øt t·∫Øt (kh√¥ng c·∫ßn $eq)</span><br>
          db.users.<span class="code-method">find</span>({ <span class="code-prop">age</span>: <span class="code-number">25</span> })<br><br>
          
          <span class="code-comment">// String comparison</span><br>
          db.users.<span class="code-method">find</span>({ <span class="code-prop">status</span>: { <span class="code-keyword">$eq</span>: <span class="code-string">"active"</span> } })
        </div>

        <div class="section-title">$ne (Not Equal)</div>
        <div class="code-block">
          <span class="code-comment">// T√¨m documents c√≥ age ‚â† 25</span><br>
          db.users.<span class="code-method">find</span>({ <span class="code-prop">age</span>: { <span class="code-keyword">$ne</span>: <span class="code-number">25</span> } })<br><br>
          
          <span class="code-comment">// Status kh√¥ng ph·∫£i "deleted"</span><br>
          db.users.<span class="code-method">find</span>({ <span class="code-prop">status</span>: { <span class="code-keyword">$ne</span>: <span class="code-string">"deleted"</span> } })
        </div>

        <div class="info-box">
          üí° <strong>$ne</strong> c≈©ng match documents kh√¥ng c√≥ field ƒë√≥
        </div>
      </div>

      <div class="card">
        <div class="card-header">
          <span class="card-icon">üìà</span>
          <span class="card-title">Comparison - $gt, $gte, $lt, $lte</span>
        </div>
        
        <div class="code-block">
          <span class="code-comment">// $gt (Greater Than) - L·ªõn h∆°n</span><br>
          db.products.<span class="code-method">find</span>({ <span class="code-prop">price</span>: { <span class="code-keyword">$gt</span>: <span class="code-number">100</span> } })<br><br>
          
          <span class="code-comment">// $gte (Greater Than or Equal) - L·ªõn h∆°n ho·∫∑c b·∫±ng</span><br>
          db.users.<span class="code-method">find</span>({ <span class="code-prop">age</span>: { <span class="code-keyword">$gte</span>: <span class="code-number">18</span> } })<br><br>
          
          <span class="code-comment">// $lt (Less Than) - Nh·ªè h∆°n</span><br>
          db.products.<span class="code-method">find</span>({ <span class="code-prop">stock</span>: { <span class="code-keyword">$lt</span>: <span class="code-number">10</span> } })<br><br>
          
          <span class="code-comment">// $lte (Less Than or Equal) - Nh·ªè h∆°n ho·∫∑c b·∫±ng</span><br>
          db.users.<span class="code-method">find</span>({ <span class="code-prop">age</span>: { <span class="code-keyword">$lte</span>: <span class="code-number">65</span> } })
        </div>

        <div class="section-title">Range Query (K·∫øt h·ª£p)</div>
        <div class="code-block">
          <span class="code-comment">// T√¨m age t·ª´ 18 ƒë·∫øn 65</span><br>
          db.users.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">age</span>: { <span class="code-keyword">$gte</span>: <span class="code-number">18</span>, <span class="code-keyword">$lte</span>: <span class="code-number">65</span> }<br>
          })<br><br>
          
          <span class="code-comment">// Gi√° t·ª´ 50 ƒë·∫øn 200</span><br>
          db.products.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">price</span>: { <span class="code-keyword">$gt</span>: <span class="code-number">50</span>, <span class="code-keyword">$lt</span>: <span class="code-number">200</span> }<br>
          })
        </div>

        <div class="tip-box">
          ‚úÖ Ho·∫°t ƒë·ªông v·ªõi: Numbers, Strings, Dates
        </div>
      </div>
    </div>

    <!-- $in & $nin -->
    <div class="grid">
      <div class="card">
        <div class="card-header">
          <span class="card-icon">üìã</span>
          <span class="card-title">Comparison - $in & $nin</span>
        </div>
        
        <div class="section-title">$in (In Array)</div>
        <div class="code-block">
          <span class="code-comment">// T√¨m status l√† "active" ho·∫∑c "pending"</span><br>
          db.users.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">status</span>: { <span class="code-keyword">$in</span>: [<span class="code-string">"active"</span>, <span class="code-string">"pending"</span>] }<br>
          })<br><br>
          
          <span class="code-comment">// T√¨m age l√† 20, 25, ho·∫∑c 30</span><br>
          db.users.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">age</span>: { <span class="code-keyword">$in</span>: [<span class="code-number">20</span>, <span class="code-number">25</span>, <span class="code-number">30</span>] }<br>
          })<br><br>
          
          <span class="code-comment">// V·ªõi ObjectId</span><br>
          db.posts.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">_id</span>: {<br>
          &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">$in</span>: [<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-method">ObjectId</span>(<span class="code-string">"..."</span>),<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-method">ObjectId</span>(<span class="code-string">"..."</span>)<br>
          &nbsp;&nbsp;&nbsp;&nbsp;]<br>
          &nbsp;&nbsp;}<br>
          })
        </div>

        <div class="section-title">$nin (Not In Array)</div>
        <div class="code-block">
          <span class="code-comment">// Lo·∫°i tr·ª´ status "deleted" v√† "banned"</span><br>
          db.users.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">status</span>: { <span class="code-keyword">$nin</span>: [<span class="code-string">"deleted"</span>, <span class="code-string">"banned"</span>] }<br>
          })<br><br>
          
          <span class="code-comment">// Age kh√¥ng ph·∫£i 18, 19, 20</span><br>
          db.users.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">age</span>: { <span class="code-keyword">$nin</span>: [<span class="code-number">18</span>, <span class="code-number">19</span>, <span class="code-number">20</span>] }<br>
          })
        </div>

        <div class="info-box">
          üí° <strong>$nin</strong> c≈©ng match documents kh√¥ng c√≥ field ƒë√≥
        </div>
      </div>

      <div class="card">
        <div class="card-header">
          <span class="card-icon">üìä</span>
          <span class="card-title">Comparison - Use Cases</span>
        </div>
        
        <div class="example-box">
          <div class="example-title">V√≠ d·ª• 1: T√¨m s·∫£n ph·∫©m trong kho·∫£ng gi√°</div>
          <div class="code-block">
            db.products.<span class="code-method">find</span>({<br>
            &nbsp;&nbsp;<span class="code-prop">price</span>: { <span class="code-keyword">$gte</span>: <span class="code-number">50</span>, <span class="code-keyword">$lte</span>: <span class="code-number">200</span> },<br>
            &nbsp;&nbsp;<span class="code-prop">category</span>: { <span class="code-keyword">$in</span>: [<span class="code-string">"electronics"</span>, <span class="code-string">"books"</span>] }<br>
            })
          </div>
        </div>

        <div class="example-box">
          <div class="example-title">V√≠ d·ª• 2: T√¨m users trong ƒë·ªô tu·ªïi</div>
          <div class="code-block">
            db.users.<span class="code-method">find</span>({<br>
            &nbsp;&nbsp;<span class="code-prop">age</span>: { <span class="code-keyword">$gte</span>: <span class="code-number">18</span>, <span class="code-keyword">$lt</span>: <span class="code-number">30</span> },<br>
            &nbsp;&nbsp;<span class="code-prop">status</span>: { <span class="code-keyword">$ne</span>: <span class="code-string">"banned"</span> }<br>
            })
          </div>
        </div>

        <div class="example-box">
          <div class="example-title">V√≠ d·ª• 3: Date range query</div>
          <div class="code-block">
            db.orders.<span class="code-method">find</span>({<br>
            &nbsp;&nbsp;<span class="code-prop">createdAt</span>: {<br>
            &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">$gte</span>: <span class="code-method">ISODate</span>(<span class="code-string">"2024-01-01"</span>),<br>
            &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">$lt</span>: <span class="code-method">ISODate</span>(<span class="code-string">"2024-12-31"</span>)<br>
            &nbsp;&nbsp;}<br>
            })
          </div>
        </div>
      </div>
    </div>

    <!-- Logical Operators -->
    <div class="grid">
      <div class="card">
        <div class="card-header">
          <span class="card-icon">üîó</span>
          <span class="card-title">Logical - $and & $or</span>
        </div>
        
        <div class="section-title">$and (Implicit)</div>
        <div class="code-block">
          <span class="code-comment">// AND ng·∫ßm ƒë·ªãnh (implicit)</span><br>
          db.users.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">age</span>: { <span class="code-keyword">$gte</span>: <span class="code-number">18</span> },<br>
          &nbsp;&nbsp;<span class="code-prop">status</span>: <span class="code-string">"active"</span><br>
          })<br>
          <span class="code-comment">// age >= 18 AND status = "active"</span>
        </div>

        <div class="section-title">$and (Explicit)</div>
        <div class="code-block">
          <span class="code-comment">// Khi c·∫ßn query c√πng field nhi·ªÅu l·∫ßn</span><br>
          db.products.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-keyword">$and</span>: [<br>
          &nbsp;&nbsp;&nbsp;&nbsp;{ <span class="code-prop">price</span>: { <span class="code-keyword">$gt</span>: <span class="code-number">50</span> } },<br>
          &nbsp;&nbsp;&nbsp;&nbsp;{ <span class="code-prop">price</span>: { <span class="code-keyword">$lt</span>: <span class="code-number">200</span> } },<br>
          &nbsp;&nbsp;&nbsp;&nbsp;{ <span class="code-prop">stock</span>: { <span class="code-keyword">$gt</span>: <span class="code-number">0</span> } }<br>
          &nbsp;&nbsp;]<br>
          })
        </div>

        <div class="section-title">$or</div>
        <div class="code-block">
          <span class="code-comment">// T√¨m age < 18 HO·∫∂C age > 65</span><br>
          db.users.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-keyword">$or</span>: [<br>
          &nbsp;&nbsp;&nbsp;&nbsp;{ <span class="code-prop">age</span>: { <span class="code-keyword">$lt</span>: <span class="code-number">18</span> } },<br>
          &nbsp;&nbsp;&nbsp;&nbsp;{ <span class="code-prop">age</span>: { <span class="code-keyword">$gt</span>: <span class="code-number">65</span> } }<br>
          &nbsp;&nbsp;]<br>
          })<br><br>
          
          <span class="code-comment">// Status "active" HO·∫∂C "pending"</span><br>
          db.users.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-keyword">$or</span>: [<br>
          &nbsp;&nbsp;&nbsp;&nbsp;{ <span class="code-prop">status</span>: <span class="code-string">"active"</span> },<br>
          &nbsp;&nbsp;&nbsp;&nbsp;{ <span class="code-prop">status</span>: <span class="code-string">"pending"</span> }<br>
          &nbsp;&nbsp;]<br>
          })
        </div>

        <div class="section-title">K·∫øt h·ª£p $and & $or</div>
        <div class="code-block">
          <span class="code-comment">// (age >= 18 AND status = "active") OR role = "admin"</span><br>
          db.users.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-keyword">$or</span>: [<br>
          &nbsp;&nbsp;&nbsp;&nbsp;{<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">$and</span>: [<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="code-prop">age</span>: { <span class="code-keyword">$gte</span>: <span class="code-number">18</span> } },<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="code-prop">status</span>: <span class="code-string">"active"</span> }<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br>
          &nbsp;&nbsp;&nbsp;&nbsp;},<br>
          &nbsp;&nbsp;&nbsp;&nbsp;{ <span class="code-prop">role</span>: <span class="code-string">"admin"</span> }<br>
          &nbsp;&nbsp;]<br>
          })
        </div>
      </div>

      <div class="card">
        <div class="card-header">
          <span class="card-icon">üö´</span>
          <span class="card-title">Logical - $not & $nor</span>
        </div>
        
        <div class="section-title">$not</div>
        <div class="code-block">
          <span class="code-comment">// NOT (age >= 18) ‚Üí age < 18</span><br>
          db.users.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">age</span>: { <span class="code-keyword">$not</span>: { <span class="code-keyword">$gte</span>: <span class="code-number">18</span> } }<br>
          })<br><br>
          
          <span class="code-comment">// NOT (price > 100)</span><br>
          db.products.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">price</span>: { <span class="code-keyword">$not</span>: { <span class="code-keyword">$gt</span>: <span class="code-number">100</span> } }<br>
          })<br><br>
          
          <span class="code-comment">// NOT regex match</span><br>
          db.users.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">email</span>: { <span class="code-keyword">$not</span>: <span class="code-string">/gmail\.com$/</span> }<br>
          })
        </div>

        <div class="section-title">$nor (NOT OR)</div>
        <div class="code-block">
          <span class="code-comment">// NOT (age < 18 OR age > 65)</span><br>
          <span class="code-comment">// ‚Üí age >= 18 AND age <= 65</span><br>
          db.users.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-keyword">$nor</span>: [<br>
          &nbsp;&nbsp;&nbsp;&nbsp;{ <span class="code-prop">age</span>: { <span class="code-keyword">$lt</span>: <span class="code-number">18</span> } },<br>
          &nbsp;&nbsp;&nbsp;&nbsp;{ <span class="code-prop">age</span>: { <span class="code-keyword">$gt</span>: <span class="code-number">65</span> } }<br>
          &nbsp;&nbsp;]<br>
          })<br><br>
          
          <span class="code-comment">// NOT (status = "deleted" OR status = "banned")</span><br>
          db.users.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-keyword">$nor</span>: [<br>
          &nbsp;&nbsp;&nbsp;&nbsp;{ <span class="code-prop">status</span>: <span class="code-string">"deleted"</span> },<br>
          &nbsp;&nbsp;&nbsp;&nbsp;{ <span class="code-prop">status</span>: <span class="code-string">"banned"</span> }<br>
          &nbsp;&nbsp;]<br>
          })
        </div>

        <div class="info-box">
          üí° <strong>$not</strong> √°p d·ª•ng cho m·ªôt ƒëi·ªÅu ki·ªán<br>
          üí° <strong>$nor</strong> √°p d·ª•ng cho nhi·ªÅu ƒëi·ªÅu ki·ªán (array)
        </div>
      </div>
    </div>

    <!-- Element Operators -->
    <div class="grid">
      <div class="card">
        <div class="card-header">
          <span class="card-icon">üîç</span>
          <span class="card-title">Element - $exists</span>
        </div>
        <div class="highlight">
          Ki·ªÉm tra field c√≥ t·ªìn t·∫°i hay kh√¥ng
        </div>
        
        <div class="code-block">
          <span class="code-comment">// T√¨m documents C√ì field "phone"</span><br>
          db.users.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">phone</span>: { <span class="code-keyword">$exists</span>: <span class="code-bool">true</span> }<br>
          })<br><br>
          
          <span class="code-comment">// T√¨m documents KH√îNG C√ì field "deletedAt"</span><br>
          db.users.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">deletedAt</span>: { <span class="code-keyword">$exists</span>: <span class="code-bool">false</span> }<br>
          })
        </div>

        <div class="code-block">
          <span class="code-comment">// K·∫øt h·ª£p v·ªõi ƒëi·ªÅu ki·ªán kh√°c</span><br>
          db.users.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">email</span>: { <span class="code-keyword">$exists</span>: <span class="code-bool">true</span> },<br>
          &nbsp;&nbsp;<span class="code-prop">status</span>: <span class="code-string">"active"</span><br>
          })
        </div>

        <div class="code-block">
          <span class="code-comment">// T√¨m documents c√≥ phone v√† phone kh√¥ng null</span><br>
          db.users.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">phone</span>: {<br>
          &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">$exists</span>: <span class="code-bool">true</span>,<br>
          &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">$ne</span>: <span class="code-keyword">null</span><br>
          &nbsp;&nbsp;}<br>
          })
        </div>

        <div class="warning-box">
          ‚ö†Ô∏è <strong>$exists: true</strong> match c·∫£ field c√≥ gi√° tr·ªã null
        </div>
      </div>

      <div class="card">
        <div class="card-header">
          <span class="card-icon">üè∑Ô∏è</span>
          <span class="card-title">Element - $type</span>
        </div>
        <div class="highlight">
          Ki·ªÉm tra ki·ªÉu d·ªØ li·ªáu BSON c·ªßa field
        </div>
        
        <div class="code-block">
          <span class="code-comment">// T√¨m documents c√≥ age l√† s·ªë nguy√™n</span><br>
          db.users.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">age</span>: { <span class="code-keyword">$type</span>: <span class="code-string">"int"</span> }<br>
          })<br><br>
          
          <span class="code-comment">// T√¨m documents c√≥ name l√† string</span><br>
          db.users.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">name</span>: { <span class="code-keyword">$type</span>: <span class="code-string">"string"</span> }<br>
          })
        </div>

        <div class="code-block">
          <span class="code-comment">// D√πng BSON type number</span><br>
          db.users.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">age</span>: { <span class="code-keyword">$type</span>: <span class="code-number">16</span> }  <span class="code-comment">// 16 = int32</span><br>
          })
        </div>

        <div class="code-block">
          <span class="code-comment">// Nhi·ªÅu types (OR)</span><br>
          db.users.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">value</span>: { <span class="code-keyword">$type</span>: [<span class="code-string">"string"</span>, <span class="code-string">"number"</span>] }<br>
          })
        </div>

        <div class="flex-row">
          <span class="tag">"string"</span>
          <span class="tag">"int"</span>
          <span class="tag">"long"</span>
          <span class="tag">"double"</span>
          <span class="tag-blue tag">"bool"</span>
          <span class="tag-blue tag">"date"</span>
          <span class="tag-orange tag">"array"</span>
          <span class="tag-orange tag">"object"</span>
          <span class="tag-purple tag">"null"</span>
          <span class="tag-purple tag">"objectId"</span>
        </div>
      </div>
    </div>

    <!-- Array Operators -->
    <div class="grid">
      <div class="card">
        <div class="card-header">
          <span class="card-icon">üìö</span>
          <span class="card-title">Array - $all & $size</span>
        </div>
        
        <div class="section-title">$all (Ch·ª©a t·∫•t c·∫£)</div>
        <div class="code-block">
          <span class="code-comment">// Array ch·ª©a T·∫§T C·∫¢ c√°c gi√° tr·ªã</span><br>
          db.posts.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">tags</span>: { <span class="code-keyword">$all</span>: [<span class="code-string">"mongodb"</span>, <span class="code-string">"database"</span>] }<br>
          })<br>
          <span class="code-comment">// tags ph·∫£i ch·ª©a c·∫£ "mongodb" V√Ä "database"</span>
        </div>

        <div class="code-block">
          <span class="code-comment">// Th·ª© t·ª± kh√¥ng quan tr·ªçng</span><br>
          <span class="code-comment">// tags: ["nosql", "mongodb", "database"] ‚Üí match ‚úì</span><br>
          <span class="code-comment">// tags: ["mongodb", "nosql"] ‚Üí kh√¥ng match ‚úó</span>
        </div>

        <div class="section-title">$size (K√≠ch th∆∞·ªõc array)</div>
        <div class="code-block">
          <span class="code-comment">// Array c√≥ ƒë√∫ng 3 elements</span><br>
          db.posts.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">tags</span>: { <span class="code-keyword">$size</span>: <span class="code-number">3</span> }<br>
          })<br><br>
          
          <span class="code-comment">// Array r·ªóng</span><br>
          db.posts.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">tags</span>: { <span class="code-keyword">$size</span>: <span class="code-number">0</span> }<br>
          })
        </div>

        <div class="warning-box">
          ‚ö†Ô∏è <strong>$size</strong> kh√¥ng h·ªó tr·ª£ range ($gt, $lt). Ch·ªâ match exact size.
        </div>

        <div class="tip-box">
          ‚úÖ ƒê·ªÉ query range size, th√™m field "tagsCount" v√† update khi thay ƒë·ªïi array
        </div>
      </div>

      <div class="card">
        <div class="card-header">
          <span class="card-icon">üéØ</span>
          <span class="card-title">Array - $elemMatch</span>
        </div>
        <div class="highlight">
          Match array element v·ªõi nhi·ªÅu ƒëi·ªÅu ki·ªán
        </div>
        
        <div class="code-block">
          <span class="code-comment">// Array of scalars</span><br>
          db.students.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">scores</span>: {<br>
          &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">$elemMatch</span>: {<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">$gte</span>: <span class="code-number">80</span>,<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">$lt</span>: <span class="code-number">90</span><br>
          &nbsp;&nbsp;&nbsp;&nbsp;}<br>
          &nbsp;&nbsp;}<br>
          })
        </div>

        <div class="code-block">
          <span class="code-comment">// Array of objects</span><br>
          db.orders.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">items</span>: {<br>
          &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">$elemMatch</span>: {<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-prop">product</span>: <span class="code-string">"Laptop"</span>,<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-prop">qty</span>: { <span class="code-keyword">$gte</span>: <span class="code-number">2</span> },<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-prop">price</span>: { <span class="code-keyword">$lt</span>: <span class="code-number">1000</span> }<br>
          &nbsp;&nbsp;&nbsp;&nbsp;}<br>
          &nbsp;&nbsp;}<br>
          })
        </div>

        <div class="example-box">
          <div class="example-title">So s√°nh: Kh√¥ng d√πng vs D√πng $elemMatch</div>
          <div class="code-block">
            <span class="code-comment">// KH√îNG d√πng $elemMatch (sai logic)</span><br>
            db.orders.<span class="code-method">find</span>({<br>
            &nbsp;&nbsp;<span class="code-string">"items.qty"</span>: { <span class="code-keyword">$gte</span>: <span class="code-number">2</span> },<br>
            &nbsp;&nbsp;<span class="code-string">"items.price"</span>: { <span class="code-keyword">$lt</span>: <span class="code-number">1000</span> }<br>
            })<br>
            <span class="code-comment">// ‚Üí Match n·∫øu B·∫§T K·ª≤ item n√†o c√≥ qty >= 2</span><br>
            <span class="code-comment">//   V√Ä B·∫§T K·ª≤ item n√†o (c√≥ th·ªÉ kh√°c) c√≥ price < 1000</span><br><br>
            
            <span class="code-comment">// D√ôNG $elemMatch (ƒë√∫ng logic)</span><br>
            <span class="code-comment">// ‚Üí Match n·∫øu C√ì item th·ªèa C·∫¢ 2 ƒëi·ªÅu ki·ªán</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Evaluation Operators -->
    <div class="grid">
      <div class="card">
        <div class="card-header">
          <span class="card-icon">üî§</span>
          <span class="card-title">Evaluation - $regex</span>
        </div>
        <div class="highlight">
          Pattern matching v·ªõi Regular Expression
        </div>
        
        <div class="code-block">
          <span class="code-comment">// T√¨m name b·∫Øt ƒë·∫ßu b·∫±ng "Nguy·ªÖn"</span><br>
          db.users.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">name</span>: { <span class="code-keyword">$regex</span>: <span class="code-string">"^Nguy·ªÖn"</span> }<br>
          })<br><br>
          
          <span class="code-comment">// Vi·∫øt t·∫Øt (kh√¥ng c·∫ßn $regex)</span><br>
          db.users.<span class="code-method">find</span>({ <span class="code-prop">name</span>: <span class="code-string">/^Nguy·ªÖn/</span> })
        </div>

        <div class="code-block">
          <span class="code-comment">// Case-insensitive v·ªõi $options</span><br>
          db.users.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">email</span>: {<br>
          &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">$regex</span>: <span class="code-string">"gmail.com$"</span>,<br>
          &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">$options</span>: <span class="code-string">"i"</span><br>
          &nbsp;&nbsp;}<br>
          })<br><br>
          
          <span class="code-comment">// Ho·∫∑c d√πng flag trong regex</span><br>
          db.users.<span class="code-method">find</span>({ <span class="code-prop">email</span>: <span class="code-string">/gmail\.com$/i</span> })
        </div>

        <div class="code-block">
          <span class="code-comment">// T√¨m ch·ª©a substring</span><br>
          db.posts.<span class="code-method">find</span>({ <span class="code-prop">title</span>: <span class="code-string">/mongodb/i</span> })<br><br>
          
          <span class="code-comment">// K·∫øt th√∫c b·∫±ng...</span><br>
          db.files.<span class="code-method">find</span>({ <span class="code-prop">filename</span>: <span class="code-string">/\.pdf$/</span> })
        </div>

        <div class="flex-row">
          <span class="tag">i - Case insensitive</span>
          <span class="tag-blue tag">m - Multiline</span>
          <span class="tag-orange tag">x - Extended</span>
          <span class="tag-purple tag">s - Dot matches newline</span>
        </div>

        <div class="tip-box">
          ‚úÖ Regex b·∫Øt ƒë·∫ßu b·∫±ng <strong>^</strong> c√≥ th·ªÉ d√πng index<br>
          ‚ö†Ô∏è Regex ch·ª©a substring kh√¥ng th·ªÉ d√πng index hi·ªáu qu·∫£
        </div>
      </div>

      <div class="card">
        <div class="card-header">
          <span class="card-icon">üßÆ</span>
          <span class="card-title">Evaluation - $expr & $mod</span>
        </div>
        
        <div class="section-title">$expr (Expression)</div>
        <div class="code-block">
          <span class="code-comment">// So s√°nh 2 fields trong c√πng document</span><br>
          db.products.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-keyword">$expr</span>: {<br>
          &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">$gt</span>: [<span class="code-string">"$discountPrice"</span>, <span class="code-string">"$regularPrice"</span>]<br>
          &nbsp;&nbsp;}<br>
          })<br>
          <span class="code-comment">// T√¨m products c√≥ discountPrice > regularPrice (l·ªói data)</span>
        </div>

        <div class="code-block">
          <span class="code-comment">// D√πng aggregation operators</span><br>
          db.orders.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-keyword">$expr</span>: {<br>
          &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">$gt</span>: [<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="code-keyword">$multiply</span>: [<span class="code-string">"$qty"</span>, <span class="code-string">"$price"</span>] },<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-number">1000</span><br>
          &nbsp;&nbsp;&nbsp;&nbsp;]<br>
          &nbsp;&nbsp;}<br>
          })<br>
          <span class="code-comment">// T√¨m orders c√≥ t·ªïng gi√° tr·ªã > 1000</span>
        </div>

        <div class="section-title">$mod (Modulo)</div>
        <div class="code-block">
          <span class="code-comment">// T√¨m s·ªë ch·∫µn (chia 2 d∆∞ 0)</span><br>
          db.numbers.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">value</span>: { <span class="code-keyword">$mod</span>: [<span class="code-number">2</span>, <span class="code-number">0</span>] }<br>
          })<br><br>
          
          <span class="code-comment">// T√¨m s·ªë l·∫ª (chia 2 d∆∞ 1)</span><br>
          db.numbers.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">value</span>: { <span class="code-keyword">$mod</span>: [<span class="code-number">2</span>, <span class="code-number">1</span>] }<br>
          })<br><br>
          
          <span class="code-comment">// Chia 10 d∆∞ 5</span><br>
          db.numbers.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">value</span>: { <span class="code-keyword">$mod</span>: [<span class="code-number">10</span>, <span class="code-number">5</span>] }<br>
          })
        </div>
      </div>
    </div>

    <!-- Text Search & Where -->
    <div class="grid">
      <div class="card">
        <div class="card-header">
          <span class="card-icon">üîé</span>
          <span class="card-title">Evaluation - $text</span>
        </div>
        <div class="highlight">
          Full-text search (c·∫ßn text index)
        </div>
        
        <div class="code-block">
          <span class="code-comment">// T·∫°o text index tr∆∞·ªõc</span><br>
          db.posts.<span class="code-method">createIndex</span>({<br>
          &nbsp;&nbsp;<span class="code-prop">title</span>: <span class="code-string">"text"</span>,<br>
          &nbsp;&nbsp;<span class="code-prop">content</span>: <span class="code-string">"text"</span><br>
          })
        </div>

        <div class="code-block">
          <span class="code-comment">// Text search</span><br>
          db.posts.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-keyword">$text</span>: {<br>
          &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">$search</span>: <span class="code-string">"mongodb database"</span><br>
          &nbsp;&nbsp;}<br>
          })<br>
          <span class="code-comment">// T√¨m documents ch·ª©a "mongodb" HO·∫∂C "database"</span>
        </div>

        <div class="code-block">
          <span class="code-comment">// Exact phrase</span><br>
          db.posts.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-keyword">$text</span>: { <span class="code-keyword">$search</span>: <span class="code-string">"\"NoSQL database\""</span> }<br>
          })<br><br>
          
          <span class="code-comment">// Exclude words (d·∫•u -)</span><br>
          db.posts.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-keyword">$text</span>: { <span class="code-keyword">$search</span>: <span class="code-string">"mongodb -sql"</span> }<br>
          })<br>
          <span class="code-comment">// T√¨m "mongodb" nh∆∞ng KH√îNG c√≥ "sql"</span>
        </div>

        <div class="code-block">
          <span class="code-comment">// Text score (relevance)</span><br>
          db.posts.<span class="code-method">find</span>(<br>
          &nbsp;&nbsp;{ <span class="code-keyword">$text</span>: { <span class="code-keyword">$search</span>: <span class="code-string">"mongodb"</span> } },<br>
          &nbsp;&nbsp;{ <span class="code-prop">score</span>: { <span class="code-keyword">$meta</span>: <span class="code-string">"textScore"</span> } }<br>
          ).<span class="code-method">sort</span>({ <span class="code-prop">score</span>: { <span class="code-keyword">$meta</span>: <span class="code-string">"textScore"</span> } })
        </div>
      </div>

      <div class="card">
        <div class="card-header">
          <span class="card-icon">‚ö†Ô∏è</span>
          <span class="card-title">Evaluation - $where (Deprecated)</span>
        </div>
        <div class="highlight">
          Execute JavaScript - KH√îNG khuy·∫øn kh√≠ch d√πng
        </div>
        
        <div class="code-block">
          <span class="code-comment">// D√πng JavaScript function</span><br>
          db.users.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-keyword">$where</span>: <span class="code-keyword">function</span>() {<br>
          &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">return</span> <span class="code-keyword">this</span>.age > <span class="code-number">18</span> && <span class="code-keyword">this</span>.status == <span class="code-string">"active"</span><br>
          &nbsp;&nbsp;}<br>
          })<br><br>
          
          <span class="code-comment">// String expression</span><br>
          db.users.<span class="code-method">find</span>({<br>
          &nbsp;&nbsp;<span class="code-keyword">$where</span>: <span class="code-string">"this.age > 18 && this.status == 'active'"</span><br>
          })
        </div>

        <div class="warning-box">
          ‚ö†Ô∏è <strong>KH√îNG khuy·∫øn kh√≠ch:</strong><br>
          ‚Ä¢ Kh√¥ng th·ªÉ d√πng index ‚Üí r·∫•t ch·∫≠m<br>
          ‚Ä¢ Security risk (code injection)<br>
          ‚Ä¢ Kh√¥ng ho·∫°t ƒë·ªông v·ªõi sharded collections<br><br>
          ‚úÖ <strong>Thay th·∫ø:</strong> D√πng $expr ho·∫∑c Aggregation Pipeline
        </div>
      </div>
    </div>

    <!-- Quick Reference -->
    <div class="grid">
      <div class="card full-width">
        <div class="card-header">
          <span class="card-icon">üìö</span>
          <span class="card-title">Quick Reference - All Query Operators</span>
        </div>
        <table class="comparison-table">
          <tr>
            <th>Category</th>
            <th>Operator</th>
            <th>Syntax</th>
            <th>M√¥ t·∫£</th>
          </tr>
          <tr>
            <td rowspan="8"><strong>Comparison</strong></td>
            <td><code>$eq</code></td>
            <td><code>{field: {$eq: value}}</code></td>
            <td>B·∫±ng</td>
          </tr>
          <tr>
            <td><code>$ne</code></td>
            <td><code>{field: {$ne: value}}</code></td>
            <td>Kh√¥ng b·∫±ng</td>
          </tr>
          <tr>
            <td><code>$gt</code></td>
            <td><code>{field: {$gt: value}}</code></td>
            <td>L·ªõn h∆°n</td>
          </tr>
          <tr>
            <td><code>$gte</code></td>
            <td><code>{field: {$gte: value}}</code></td>
            <td>L·ªõn h∆°n ho·∫∑c b·∫±ng</td>
          </tr>
          <tr>
            <td><code>$lt</code></td>
            <td><code>{field: {$lt: value}}</code></td>
            <td>Nh·ªè h∆°n</td>
          </tr>
          <tr>
            <td><code>$lte</code></td>
            <td><code>{field: {$lte: value}}</code></td>
            <td>Nh·ªè h∆°n ho·∫∑c b·∫±ng</td>
          </tr>
          <tr>
            <td><code>$in</code></td>
            <td><code>{field: {$in: [v1, v2]}}</code></td>
            <td>Trong m·∫£ng gi√° tr·ªã</td>
          </tr>
          <tr>
            <td><code>$nin</code></td>
            <td><code>{field: {$nin: [v1, v2]}}</code></td>
            <td>Kh√¥ng trong m·∫£ng</td>
          </tr>
          <tr>
            <td rowspan="4"><strong>Logical</strong></td>
            <td><code>$and</code></td>
            <td><code>{$and: [{...}, {...}]}</code></td>
            <td>AND logic</td>
          </tr>
          <tr>
            <td><code>$or</code></td>
            <td><code>{$or: [{...}, {...}]}</code></td>
            <td>OR logic</td>
          </tr>
          <tr>
            <td><code>$not</code></td>
            <td><code>{field: {$not: {...}}}</code></td>
            <td>NOT logic</td>
          </tr>
          <tr>
            <td><code>$nor</code></td>
            <td><code>{$nor: [{...}, {...}]}</code></td>
            <td>NOR logic</td>
          </tr>
          <tr>
            <td rowspan="2"><strong>Element</strong></td>
            <td><code>$exists</code></td>
            <td><code>{field: {$exists: true}}</code></td>
            <td>Field t·ªìn t·∫°i</td>
          </tr>
          <tr>
            <td><code>$type</code></td>
            <td><code>{field: {$type: "string"}}</code></td>
            <td>Ki·ªÉu d·ªØ li·ªáu</td>
          </tr>
          <tr>
            <td rowspan="3"><strong>Array</strong></td>
            <td><code>$all</code></td>
            <td><code>{arr: {$all: [v1, v2]}}</code></td>
            <td>Ch·ª©a t·∫•t c·∫£</td>
          </tr>
          <tr>
            <td><code>$elemMatch</code></td>
            <td><code>{arr: {$elemMatch: {...}}}</code></td>
            <td>Element match ƒëi·ªÅu ki·ªán</td>
          </tr>